<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon/favicon.ico"/><script async="" defer="" data-website-id="74444df2-7306-41d7-b127-6463fcb046c3" src="https://umami.nordictechjobs.com/umami.js"></script><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="A statically generated blog example using Next.js and Markdown."/><meta property="og:image" content="https://og-image.now.sh/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.zeit.co%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Setup Echo web server to serve a Single Page Application (SPA) | sunde.dev</title><meta property="og:image" content="/assets/blog/echo server for a spa/golang-react-echo.jpg"/><meta name="next-head-count" content="18"/><link rel="preload" href="/_next/static/css/1e79794c66822146.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1e79794c66822146.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-63157d71ad419e09.js" defer=""></script><script src="/_next/static/chunks/main-c59a42b9e9a6f445.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d0f99c710332dc22.js" defer=""></script><script src="/_next/static/chunks/c16184b3-4abe027722fcda81.js" defer=""></script><script src="/_next/static/chunks/956-3521b4b67ce8c4fc.js" defer=""></script><script src="/_next/static/chunks/318-a477639f2d07591e.js" defer=""></script><script src="/_next/static/chunks/770-ef4b039553301de8.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-0650e0e490cf1940.js" defer=""></script><script src="/_next/static/kyUTYWukRYmUNvhCezNrY/_buildManifest.js" defer=""></script><script src="/_next/static/kyUTYWukRYmUNvhCezNrY/_ssgManifest.js" defer=""></script><style id="__jsx-1ce0501be4d47317">h1.jsx-1ce0501be4d47317{margin-bottom:0}h1.jsx-1ce0501be4d47317:hover{cursor:pointer}nav.jsx-1ce0501be4d47317{padding:1.5rem 1.25rem;border-bottom:1px solid#ebebeb;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}@media(min-width:768px){.header.jsx-1ce0501be4d47317{height:100vh;position:fixed;left:0;top:0}.nav.jsx-1ce0501be4d47317{padding:2rem;width:10vw;height:100%;border-bottom:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}}</style></head><body><div id="__next"><div class="min-h-screen"><div class="border-b bg-accent-1 border-accent-2"><div class="md:container mx-auto px-5"><div class="py-2 text-center text-sm">The source code for this blog is<!-- --> <a href="https://github.com/persunde/persunde.github.io/" class="underline hover:text-success duration-200 transition-colors" target="_blank">available on GitHub</a></div></div></div><main><header class="jsx-1ce0501be4d47317 header"><nav role="navigation" aria-label="main navigation" class="jsx-1ce0501be4d47317 nav"><a href="/blog"><h1 class="jsx-1ce0501be4d47317">sunde.dev<!-- -->/blog</h1></a><div class="jsx-1ce0501be4d47317"><a href="/"><h1 class="jsx-1ce0501be4d47317">info</h1></a></div></nav></header><div class="md:container mx-auto px-5"><article class="mb-32"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Setup Echo web server to serve a Single Page Application (SPA)</h1><div class="mb-8 md:mb-16 -mx-5 sm:mx-0"><div class="-mx-5 sm:mx-0"><img src="/assets/blog/echo server for a spa/golang-react-echo.jpg" alt="Cover Image for Setup Echo web server to serve a Single Page Application (SPA)" class="shadow-small"/></div></div><div class="max-w-2xl block mb-6"><div class="flex items-center space-x-4 mb-2 flex-wrap"><div class="flex items-center"><img src="/assets/index/geneve-anime.jpeg" class="w-12 h-12 rounded-full mr-4" alt="Per Sunde"/><div class="text-xl font-bold">Per Sunde</div></div><div class="text-lg col-span-2 space-x-2 flex"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="calendar" class="svg-inline--fa fa-calendar w-6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"></path></svg><time dateTime="2021-01-25">January	25, 2021</time></div><div class="text-lg font-bold col-span-3 flex space-x-2"><div><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="clock" class="svg-inline--fa fa-clock w-6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"></path></svg></div><div>3 min read</div></div><div class="flex items-center space-x-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" class="svg-inline--fa fa-tag w-6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 80V229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7H48C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"></path></svg><div>Go, Golang, Echo, SPA, React, Single Page Application, Webserver</div></div></div></div><div class="markdown-body max-w-5xl "><h1>Setup Echo web server to serve a Single Page Application (SPA)</h1>
<p>Do you have a Single Page App that is written in React, Vue or maybe Svelte, and you want to use the Golang Echo web framwork to serve your web-app?
Do you experience issues with the SPA routing?</p>
<h2>Echo has problems with SPA routing</h2>
<p>By default Echo does not work great with a SPA routing. It should work if you go to the base URL for example https://my-spa-url.com. But if you try to enter something like https://my-spa-url.com/sub-path into your web-browser, then the SPA will not go to the correct page if you serve the files with Echo and you are using Echo&#x27;s default settings!</p>
<h2>Echo needs configuration to work with SPA</h2>
<p>If you want to use the Echo webserver framework for Go to serve a SPA you need to configure it to handle the requests properly. An SPA&#x27;s will not send a request for each sub-url path. Therefore you have to configure your Echo web-server to expect a SPA and serve the files correctly.</p>
<h2>How to make Echo serve a SPA correctly?</h2>
<p>To make Echo work well with your SPA, you need to enable the HTML5 property for the Echo static middleware. This will enable Echo to behave similarly to your development server that you normally start with a command like <code>npm start</code> or <code>yarn dev</code>.</p>
<p>So to make your Echo Golang web-server correctly serve a SPA, you need to add the middleware code shown below. Add this code the same place where you initialize your Echo server:</p>
<pre><div style="color:#d4d4d4;font-size:16px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-go" style="color:#d4d4d4;font-size:16px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">import</span><span> echoMw </span><span class="token" style="color:#ce9178">&quot;github.com/labstack/echo/v4/middleware&quot;</span><span>
</span>
<span>e</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Use</span><span class="token" style="color:#d4d4d4">(</span><span>middleware</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">StaticWithConfig</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span>StaticConfig</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>	Root</span><span class="token" style="color:#d4d4d4">:</span><span>   </span><span class="token" style="color:#ce9178">&quot;public&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>		</span><span class="token" style="color:#6a9955">// This is the path to your SPA build folder, the folder that is created from running &quot;npm build&quot;</span><span>
</span><span>	Index</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#ce9178">&quot;index.html&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>	</span><span class="token" style="color:#6a9955">// This is the default html page for your SPA</span><span>
</span><span>	HTML5</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span></code></div></pre>
<p>Below you can see the full code on how I initialize my simple Echo server to be configured to serve a SPA:</p>
<pre><div style="color:#d4d4d4;font-size:16px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-go" style="color:#d4d4d4;font-size:16px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">package</span><span> server
</span>
<span></span><span class="token" style="color:#569CD6">import</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>	</span><span class="token" style="color:#ce9178">&quot;github.com/labstack/echo/v4&quot;</span><span>
</span><span>	echoMw </span><span class="token" style="color:#ce9178">&quot;github.com/labstack/echo/v4/middleware&quot;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// Init the echo webserver</span><span>
</span><span></span><span class="token" style="color:#569CD6">func</span><span> </span><span class="token" style="color:#dcdcaa">Init</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span>echo</span><span class="token" style="color:#d4d4d4">.</span><span>Echo </span><span class="token" style="color:#d4d4d4">{</span><span>
</span>
<span>	e </span><span class="token" style="color:#d4d4d4">:=</span><span> echo</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">New</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>	</span><span class="token" style="color:#6a9955">// Set Bundle MiddleWare</span><span>
</span><span>	e</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Use</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Logger</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>	e</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Use</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Gzip</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>	e</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Use</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">StaticWithConfig</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span>StaticConfig</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>		Root</span><span class="token" style="color:#d4d4d4">:</span><span>   </span><span class="token" style="color:#ce9178">&quot;public&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>		</span><span class="token" style="color:#6a9955">// This is the path to your SPA build folder, the folder that is created from running &quot;npm build&quot;</span><span>
</span><span>		Index</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#ce9178">&quot;index.html&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>	</span><span class="token" style="color:#6a9955">// This is the default html page for your SPA</span><span>
</span><span>		Browse</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">false</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>		HTML5</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>	</span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>	</span><span class="token" style="color:#569CD6">return</span><span> e
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></div></pre>
<p>Now your Echo web server will serve your Single Page Application correctly. Have fun :)</p>
<h2>Read more about Echo configuration</h2>
<p>Read more about the Ehcho static middleware configuration you can do here:<br/>
<!-- -->https://echo.labstack.com/middleware/static</p></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="md:container mx-auto px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-5xl font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">If you are not sure which beer is yours, it is the one with the most in it</h3><div class="flex flex-col lg:flex-row justify-center items-center lg:pl-4 lg:w-1/2"><a href="https://github.com/persunde/" class="mx-3 font-bold hover:underline">Check out my GitHub</a></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Setup Echo web server to serve a Single Page Application (SPA)","date":"2021-01-25","slug":"Echo_Golang_server_for_a_Single_Page_Application_(SPA)","author":"Per Sunde","content":"# Setup Echo web server to serve a Single Page Application (SPA)\nDo you have a Single Page App that is written in React, Vue or maybe Svelte, and you want to use the Golang Echo web framwork to serve your web-app?\nDo you experience issues with the SPA routing? \n\n## Echo has problems with SPA routing\nBy default Echo does not work great with a SPA routing. It should work if you go to the base URL for example https://my-spa-url.com. But if you try to enter something like https://my-spa-url.com/sub-path into your web-browser, then the SPA will not go to the correct page if you serve the files with Echo and you are using Echo's default settings!\n\n## Echo needs configuration to work with SPA\nIf you want to use the Echo webserver framework for Go to serve a SPA you need to configure it to handle the requests properly. An SPA's will not send a request for each sub-url path. Therefore you have to configure your Echo web-server to expect a SPA and serve the files correctly.\n\n## How to make Echo serve a SPA correctly?\nTo make Echo work well with your SPA, you need to enable the HTML5 property for the Echo static middleware. This will enable Echo to behave similarly to your development server that you normally start with a command like `npm start` or `yarn dev`.\n\nSo to make your Echo Golang web-server correctly serve a SPA, you need to add the middleware code shown below. Add this code the same place where you initialize your Echo server:\n\n```go\nimport echoMw \"github.com/labstack/echo/v4/middleware\"\n\ne.Use(middleware.StaticWithConfig(echoMw.StaticConfig{\n\tRoot:   \"public\",\t\t// This is the path to your SPA build folder, the folder that is created from running \"npm build\"\n\tIndex:  \"index.html\",\t// This is the default html page for your SPA\n\tHTML5:  true,\n}))\n```\n\nBelow you can see the full code on how I initialize my simple Echo server to be configured to serve a SPA:\n\n```go\npackage server\n\nimport (\n\t\"github.com/labstack/echo/v4\"\n\techoMw \"github.com/labstack/echo/v4/middleware\"\n)\n\n// Init the echo webserver\nfunc Init() *echo.Echo {\n\n\te := echo.New()\n\n\t// Set Bundle MiddleWare\n\te.Use(echoMw.Logger())\n\te.Use(echoMw.Gzip())\n\n\te.Use(echoMw.StaticWithConfig(echoMw.StaticConfig{\n\t\tRoot:   \"public\",\t\t// This is the path to your SPA build folder, the folder that is created from running \"npm build\"\n\t\tIndex:  \"index.html\",\t// This is the default html page for your SPA\n\t\tBrowse: false,\n\t\tHTML5:  true,\n\t}))\n\n\treturn e\n}\n```\n\nNow your Echo web server will serve your Single Page Application correctly. Have fun :)\n\n\n## Read more about Echo configuration\nRead more about the Ehcho static middleware configuration you can do here:  \nhttps://echo.labstack.com/middleware/static","featuredImage":"/assets/blog/echo server for a spa/golang-react-echo.jpg","readingTime":"3 min read","tags":"Go, Golang, Echo, SPA, React, Single Page Application, Webserver"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"Echo_Golang_server_for_a_Single_Page_Application_(SPA)"},"buildId":"kyUTYWukRYmUNvhCezNrY","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>