<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="A statically generated blog example using Next.js and Markdown."/><meta property="og:image" content="https://og-image.now.sh/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.zeit.co%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Setup Echo web server to serve a Single Page Application (SPA) | sunde.dev</title><meta property="og:image" content="/assets/blog/echo server for a spa/golang-react-echo.jpg"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/60f392b2297d030e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/60f392b2297d030e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-779b41245c009d2a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a39a18f2a722fe08.js" defer=""></script><script src="/_next/static/chunks/764-f50e1ad000a37d38.js" defer=""></script><script src="/_next/static/chunks/759-5d3f352eaf61b7dd.js" defer=""></script><script src="/_next/static/chunks/874-1d20dafe5c589442.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-3fa771ff7e946422.js" defer=""></script><script src="/_next/static/ThryJtJEDONyb6iYpm5fY/_buildManifest.js" defer=""></script><script src="/_next/static/ThryJtJEDONyb6iYpm5fY/_ssgManifest.js" defer=""></script><script src="/_next/static/ThryJtJEDONyb6iYpm5fY/_middlewareManifest.js" defer=""></script><style id="__jsx-46832e912b79b97e">h1.jsx-46832e912b79b97e{margin-bottom:0}h1.jsx-46832e912b79b97e:hover{cursor:pointer}nav.jsx-46832e912b79b97e{padding:1.5rem 1.25rem;border-bottom:1px solid#ebebeb;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}@media(min-width:1800px){.header.jsx-46832e912b79b97e{height:100vh;position:fixed;left:0;top:0}.nav.jsx-46832e912b79b97e{padding:2rem;width:10vw;height:100%;border-bottom:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}}</style></head><body><div id="__next" data-reactroot=""><div class="min-h-screen"><div class="border-b bg-accent-1 border-accent-2"><div class="md:container mx-auto px-5"><div class="py-2 text-center text-sm">The source code for this blog is<!-- --> <a href="https://github.com/persunde/persunde.github.io/" class="underline hover:text-success duration-200 transition-colors" target="_blank">available on GitHub</a></div></div></div><main><header class="jsx-46832e912b79b97e header"><nav role="navigation" aria-label="main navigation" class="jsx-46832e912b79b97e nav"><h1 class="jsx-46832e912b79b97e">sunde.dev<!-- -->/blog</h1><div class="jsx-46832e912b79b97e"><h1 class="jsx-46832e912b79b97e">info</h1></div></nav></header><div class="md:container mx-auto px-5"><article class="mb-32 max-w-6xl"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Setup Echo web server to serve a Single Page Application (SPA)</h1><div class="mb-8 md:mb-16 -mx-5 sm:mx-0"><div class="-mx-5 sm:mx-0"><img src="/assets/blog/echo server for a spa/golang-react-echo.jpg" alt="Cover Image for Setup Echo web server to serve a Single Page Application (SPA)" class="shadow-small"/></div></div><div class="max-w-2xl block mb-6"><div class="flex items-center space-x-4 mb-2 flex-wrap"><div class="flex items-center"><img src="/assets/index/geneve-anime.jpeg" class="w-12 h-12 rounded-full mr-4" alt="Per Sunde"/><div class="text-xl font-bold">Per Sunde</div></div><div class="text-lg col-span-2 space-x-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="calendar" class="svg-inline--fa fa-calendar " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M96 32C96 14.33 110.3 0 128 0C145.7 0 160 14.33 160 32V64H288V32C288 14.33 302.3 0 320 0C337.7 0 352 14.33 352 32V64H400C426.5 64 448 85.49 448 112V160H0V112C0 85.49 21.49 64 48 64H96V32zM448 464C448 490.5 426.5 512 400 512H48C21.49 512 0 490.5 0 464V192H448V464z"></path></svg><time dateTime="2021-01-25">January	25, 2021</time></div><div class="text-lg font-bold col-span-3 flex space-x-2"><div><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="clock" class="svg-inline--fa fa-clock " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"></path></svg></div><div>3 min read</div></div><div class="flex items-center space-x-2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" class="svg-inline--fa fa-tag " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M48 32H197.5C214.5 32 230.7 38.74 242.7 50.75L418.7 226.7C443.7 251.7 443.7 292.3 418.7 317.3L285.3 450.7C260.3 475.7 219.7 475.7 194.7 450.7L18.75 274.7C6.743 262.7 0 246.5 0 229.5V80C0 53.49 21.49 32 48 32L48 32zM112 176C129.7 176 144 161.7 144 144C144 126.3 129.7 112 112 112C94.33 112 80 126.3 80 144C80 161.7 94.33 176 112 176z"></path></svg><div>Go, Golang, Echo, SPA, React, Single Page Application, Webserver</div></div></div></div><div class="markdown-body"><h1>Setup Echo web server to serve a Single Page Application (SPA)</h1>
<p>Do you have a Single Page App that is written in React, Vue or maybe Svelte, and you want to use the Golang Echo web framwork to serve your web-app?
Do you experience issues with the SPA routing?</p>
<h2>Echo has problems with SPA routing</h2>
<p>By default Echo does not work great with a SPA routing. It should work if you go to the base URL for example https://my-spa-url.com. But if you try to enter something like https://my-spa-url.com/sub-path into your web-browser, then the SPA will not go to the correct page if you serve the files with Echo and you are using Echo&#x27;s default settings!</p>
<h2>Echo needs configuration to work with SPA</h2>
<p>If you want to use the Echo webserver framework for Go to serve a SPA you need to configure it to handle the requests properly. An SPA&#x27;s will not send a request for each sub-url path. Therefore you have to configure your Echo web-server to expect a SPA and serve the files correctly.</p>
<h2>How to make Echo serve a SPA correctly?</h2>
<p>To make Echo work well with your SPA, you need to enable the HTML5 property for the Echo static middleware. This will enable Echo to behave similarly to your development server that you normally start with a command like <code>npm start</code> or <code>yarn dev</code>.</p>
<p>So to make your Echo Golang web-server correctly serve a SPA, you need to add the middleware code shown below. Add this code the same place where you initialize your Echo server:</p>
<pre><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-go" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">import</span><span> echoMw </span><span class="token" style="color:#ce9178">&quot;github.com/labstack/echo/v4/middleware&quot;</span><span>
</span>
<span>e</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Use</span><span class="token" style="color:#d4d4d4">(</span><span>middleware</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">StaticWithConfig</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span>StaticConfig</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>	Root</span><span class="token" style="color:#d4d4d4">:</span><span>   </span><span class="token" style="color:#ce9178">&quot;public&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>		</span><span class="token" style="color:#6a9955">// This is the path to your SPA build folder, the folder that is created from running &quot;npm build&quot;</span><span>
</span><span>	Index</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#ce9178">&quot;index.html&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>	</span><span class="token" style="color:#6a9955">// This is the default html page for your SPA</span><span>
</span><span>	HTML5</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span></code></pre></pre>
<p>Below you can see the full code on how I initialize my simple Echo server to be configured to serve a SPA:</p>
<pre><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-go" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">package</span><span> server
</span>
<span></span><span class="token" style="color:#569CD6">import</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>	</span><span class="token" style="color:#ce9178">&quot;github.com/labstack/echo/v4&quot;</span><span>
</span><span>	echoMw </span><span class="token" style="color:#ce9178">&quot;github.com/labstack/echo/v4/middleware&quot;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// Init the echo webserver</span><span>
</span><span></span><span class="token" style="color:#569CD6">func</span><span> </span><span class="token" style="color:#dcdcaa">Init</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span>echo</span><span class="token" style="color:#d4d4d4">.</span><span>Echo </span><span class="token" style="color:#d4d4d4">{</span><span>
</span>
<span>	e </span><span class="token" style="color:#d4d4d4">:=</span><span> echo</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">New</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>	</span><span class="token" style="color:#6a9955">// Set Bundle MiddleWare</span><span>
</span><span>	e</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Use</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Logger</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>	e</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Use</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Gzip</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>	e</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">Use</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#dcdcaa">StaticWithConfig</span><span class="token" style="color:#d4d4d4">(</span><span>echoMw</span><span class="token" style="color:#d4d4d4">.</span><span>StaticConfig</span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>		Root</span><span class="token" style="color:#d4d4d4">:</span><span>   </span><span class="token" style="color:#ce9178">&quot;public&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>		</span><span class="token" style="color:#6a9955">// This is the path to your SPA build folder, the folder that is created from running &quot;npm build&quot;</span><span>
</span><span>		Index</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#ce9178">&quot;index.html&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>	</span><span class="token" style="color:#6a9955">// This is the default html page for your SPA</span><span>
</span><span>		Browse</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">false</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>		HTML5</span><span class="token" style="color:#d4d4d4">:</span><span>  </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>	</span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span>	</span><span class="token" style="color:#569CD6">return</span><span> e
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></pre>
<p>Now your Echo web server will serve your Single Page Application correctly. Have fun :)</p>
<h2>Read more about Echo configuration</h2>
<p>Read more about the Ehcho static middleware configuration you can do here:<br/>
<!-- -->https://echo.labstack.com/middleware/static</p></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="md:container mx-auto px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-5xl font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">If you are not sure which beer is yours, it is the one with the most in it</h3><div class="flex flex-col lg:flex-row justify-center items-center lg:pl-4 lg:w-1/2"><a href="https://github.com/persunde/" class="mx-3 font-bold hover:underline">Check out my GitHub</a></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Setup Echo web server to serve a Single Page Application (SPA)","date":"2021-01-25","slug":"Echo_Golang_server_for_a_Single_Page_Application_(SPA)","author":"Per Sunde","content":"# Setup Echo web server to serve a Single Page Application (SPA)\nDo you have a Single Page App that is written in React, Vue or maybe Svelte, and you want to use the Golang Echo web framwork to serve your web-app?\nDo you experience issues with the SPA routing? \n\n## Echo has problems with SPA routing\nBy default Echo does not work great with a SPA routing. It should work if you go to the base URL for example https://my-spa-url.com. But if you try to enter something like https://my-spa-url.com/sub-path into your web-browser, then the SPA will not go to the correct page if you serve the files with Echo and you are using Echo's default settings!\n\n## Echo needs configuration to work with SPA\nIf you want to use the Echo webserver framework for Go to serve a SPA you need to configure it to handle the requests properly. An SPA's will not send a request for each sub-url path. Therefore you have to configure your Echo web-server to expect a SPA and serve the files correctly.\n\n## How to make Echo serve a SPA correctly?\nTo make Echo work well with your SPA, you need to enable the HTML5 property for the Echo static middleware. This will enable Echo to behave similarly to your development server that you normally start with a command like `npm start` or `yarn dev`.\n\nSo to make your Echo Golang web-server correctly serve a SPA, you need to add the middleware code shown below. Add this code the same place where you initialize your Echo server:\n\n```go\nimport echoMw \"github.com/labstack/echo/v4/middleware\"\n\ne.Use(middleware.StaticWithConfig(echoMw.StaticConfig{\n\tRoot:   \"public\",\t\t// This is the path to your SPA build folder, the folder that is created from running \"npm build\"\n\tIndex:  \"index.html\",\t// This is the default html page for your SPA\n\tHTML5:  true,\n}))\n```\n\nBelow you can see the full code on how I initialize my simple Echo server to be configured to serve a SPA:\n\n```go\npackage server\n\nimport (\n\t\"github.com/labstack/echo/v4\"\n\techoMw \"github.com/labstack/echo/v4/middleware\"\n)\n\n// Init the echo webserver\nfunc Init() *echo.Echo {\n\n\te := echo.New()\n\n\t// Set Bundle MiddleWare\n\te.Use(echoMw.Logger())\n\te.Use(echoMw.Gzip())\n\n\te.Use(echoMw.StaticWithConfig(echoMw.StaticConfig{\n\t\tRoot:   \"public\",\t\t// This is the path to your SPA build folder, the folder that is created from running \"npm build\"\n\t\tIndex:  \"index.html\",\t// This is the default html page for your SPA\n\t\tBrowse: false,\n\t\tHTML5:  true,\n\t}))\n\n\treturn e\n}\n```\n\nNow your Echo web server will serve your Single Page Application correctly. Have fun :)\n\n\n## Read more about Echo configuration\nRead more about the Ehcho static middleware configuration you can do here:  \nhttps://echo.labstack.com/middleware/static","featuredImage":"/assets/blog/echo server for a spa/golang-react-echo.jpg","readingTime":"3 min read","tags":"Go, Golang, Echo, SPA, React, Single Page Application, Webserver"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"Echo_Golang_server_for_a_Single_Page_Application_(SPA)"},"buildId":"ThryJtJEDONyb6iYpm5fY","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>