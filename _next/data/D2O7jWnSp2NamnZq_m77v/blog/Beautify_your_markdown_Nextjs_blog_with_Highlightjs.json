{"pageProps":{"post":{"title":"Beautify your markdown Nextjs blog with Highlightjs","date":"2020-04-30","slug":"Beautify_your_markdown_Nextjs_blog_with_Highlightjs","author":"Per Sunde","content":"\nDo you want your tech blog to have code highlighting features and make it look just like on Github? You too can easily get your markdown code segments color coded just like you see here on this blog. By following these simple steps you can add code beautifier / syntax highlighter to your own Nextjs markdown blog and your tech blog will look much nicer, easier to read and more professional.\n\nThis is the code before we apply the code beautifier. This function takes inn the body, or the main text, of the blog as markdown text, and returns a HTML version of the markdown text using the library react-markdown.\n\n### Just want to copy/paste a solution?\nIf you just want to find a solution to copy/paste, install the packages and go down to **Final Result** to see the end result code.\n\n## Install the Needed packages\nNow we want to add the beautifier to our code.\nFirst install **react-highlight** \n```bash\nnpm install react-highlight --save\nnpm install highlight.js\nnpm install react-markdown --save\n```\n\n## Before markdown highlighting  \nI have a file called `post-body.tsx` where I put this code.\n```typescript\nimport  ReactMarkdown  from  'react-markdown'\n\nexport  default  function  PostBody({ content }) {\n\treturn (\n\t\t<div  className=\"markdown-body\">\n\t\t\t<ReactMarkdown  source={content}  />\n\t\t</div>\n\t)\n}\n```\n\n## Choose your CSS styling\nNow you need to select a CSS styling of your choice. I chose the standard GitHub styling, but **you can choose whichever style suites you the most**. Import this statement in your `_app.tsx` or `_app.js` file, or change the filename to the styling of your choice:\n```js\nimport  '../node_modules/highlight.js/styles/github.css';\n```\n> take a look at the highlight.js demo page for an easy and fast way to check out all the styling options you have: \n> https://highlightjs.org/static/demo/\n\n## Add Code Beautifier / Highlighter\nNow we can start to add the beautifier to our code. In the `post-body.tsx ` file import the Highlight component. It is needed to wrap around the text we want to highlight, also import NextPage from the Nextjs library as it is needed by the ReactMarkdown component later on.\n\nThe new function HighlightCode wraps the input element in a `Highlight` component, this is needed for the last step.\n```typescript\nimport  ReactMarkdown  from  'react-markdown'\nimport  Highlight  from  'react-highlight';\nimport { NextPage } from  'next';\n\ninterface  HighlightCodeProps {\n\tmarkdown: any;\n}\n\nconst  HighlightCode: NextPage<HighlightCodeProps> = ({ markdown }) => {\n\treturn (\n\t\t<div>\n\t\t\t<Highlight>\n\t\t\t\t{markdown}\n\t\t\t</Highlight>\n\t\t\t<br  />\n\t\t</div>\n\t)\n}\n```\n\nIf you dont use TypeScript, do it like this instead\n```js\nconst  HighlightCode = ({ value }) => {\n\treturn (\n\t\t<div>\n\t\t\t<Highlight>\n\t\t\t\t{value}\n\t\t\t</Highlight>\n\t\t\t<br  />\n\t\t</div>\n\t)\n}\n```\nThe `<Hightlight />` component will parse the text and organize it into HTML elements and give each a class name that can be styled.\n\nNow we need to modify the original function and add the new `HighlightCode` function we wrote to the `ReactMarkdown` renderer. Whenever the `ReactMarkdown` component identifies a \"code\" block in the markdown text, it calls the `HighlightCode` function with the text inside that markdown-block, so you can customize it however you want.  You can also add any other type of markdown-blocks you want the `ReactMarkdown` to specially render, by adding it under code with a corresponding function, just like we did for the markdown-code block here.\n```typescript\nexport  default  function  PostBody({ content }) {\n\treturn (\n\t\t<div  className=\"markdown-body\">\n\t\t\t<ReactMarkdown  source={content}\n\t\t\trenderers={{\n\t\t\t\tcode:  HighlightCode\n\t\t\t}}\n\t\t/>\n\t\t</div>\n\t)\n}\n```\nThe `code` parameter of `renderers`  in requires a component with a `<code>` element that is inside a `<pre>` element to work. The `<Hightlight />` component does this for us.\n\n## Final Result\nHere you see the final result, if you want a quick copy / paste solution for your website.\n```typescript\nimport  ReactMarkdown  from  'react-markdown'\nimport  Highlight  from  'react-highlight';\nimport { NextPage } from  'next';\n\nexport  default  function  PostBody({ content }) {\n\treturn (\n\t\t<div  className=\"markdown-body\">\n\t\t\t<ReactMarkdown  source={content}\n\t\t\trenderers={{\n\t\t\t\tcode:  HighlightCode\n\t\t\t}}\n\t\t/>\n\t\t</div>\n\t)\n}\n\ninterface  HighlightCodeProps {\n\tvalue: any;\n}\n\nconst  HighlightCode: NextPage<HighlightCodeProps> = ({ value }) => {\n\treturn (\n\t\t<div>\n\t\t\t<Highlight>\n\t\t\t\t{value}\n\t\t\t</Highlight>\n\t\t\t<br  />\n\t\t</div>\n\t)\n}\n```\n\nNow you should have a code beautifier. \nYou can also create new functions that will custom render any other markdown-blocks you can think of.\n\n##  Style other markdown blocks\nFor example here is a quick and dirty way to style your ordered or unordered lists, but this code assumes there are no subsists inside the list. You can add classes and style your lists as you wish:\n```typescript\nexport  default  function  PostBody({ content }) {\n\treturn (\n\t\t<div  className=\"markdown-body max-w-5xl \">\n\t\t\t<ReactMarkdown  source={content}\n\t\t\t\trenderers={{\n\t\t\t\t\tlist:  OrderedListBlock,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n\ninterface  ListBlockProps {\n\tordered: boolean,\n\tchildren: any,\n}\n  \nconst  OrderedListBlock: NextPage<ListBlockProps> = ({ordered, children}: OrderedListBlockProps) => {\n\tconst  list = children.map(val  => {\n\t\treturn  <li>{val}</li>\n\t})\n\t  \n\tif (ordered) {\n\t\treturn  <ol  className=\"markdown-ol\">{list}</ol>\n\t} else {\n\t\treturn  <ul  className=\"markdown-ul\">{list}</ul>\n\t}\n}\n```\nCheckout here for all the different types you can use **react-markdown** to style however you like:\nhttps://www.npmjs.com/package/react-markdown#node-types\n\nIf you like this blog, checkout my blog about [creating your own personal website with Github Pages](https://sunde.dev/blog/How_to_create_a_free_static_website_with_Github_Pages),\n\nFind more blogs about tech and Nextjs here [https://sunde.dev/blog](https://sunde.dev/blog)\n\n\n","featuredImage":"/assets/blog/beautify-markdown/beautify-markdown.png","readingTime":"5 min read","tags":"Next.js, markdown, beautify code, code highlighter"}},"__N_SSG":true}